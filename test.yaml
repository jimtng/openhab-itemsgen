# There are three levels where settings can be specified:
# global level (inside the settings section), template level, and thing level

settings:
  things:
    # output-file: ../things/generated.things
    output_file: test.things
    header: |+
      // This file is automatically generated

  items:
    # output-file: ../items/generated.items
    output_file: test.items
    header: |+
      // This file is automatically generated

      Group gExhaustFans
      Group gLightButtons
      Group gDoorBell
      Group:Contact:OR(OPEN,CLOSED) gDoorsAndWindows 
      Group:Contact:OR(OPEN,CLOSED) gExternalDoors (gDoorsAndWindows)
      Group:Contact:OR(OPEN,CLOSED) gWindows (gDoorsAndWindows)
      Group:Contact:OR(OPEN,CLOSED) gSecurityScreenDoors


      Group gTemperature
      Group gHumidity
      Group:Number:MAX gIndoorHumidity (gHumidity)

      Group gSecurityLights

      Group:Contact:OR(OPEN,CLOSED) gLeftOpenAlert                                                                                                                   (gStateAlerts)            	// to send an alert when the item stays open / on


      Group gInside

      Group gLights
      Group gOutsideLights  (gLights)
      Group gInsideLights   (gLights, gInside)
      Group gTasmotaState
      Group gTasmotaIPs
      Group gPresenceSimulators  // Things to turn on / off to simulate presence in the house
      Group:Switch:OR(ON,OFF) gLivingRoomLights
      Group:Switch:OR(ON,OFF) gMasterBedRoomLights "Master Bed Room Lights" (gInsideLights)
      Group:Switch:OR(ON,OFF) gBackPorch_Switch2 
      Group gGroupedSwitches
      Group:Switch:OR(ON,OFF) gMasterBedRoom_CeilingFan "Master Bed Room Ceiling Fan" (gInsideLights)

      Group gHallwayLightSwitches

      Group:Switch:OR(ON,OFF) gBackYardLights "Backyard Lights" (gOutsideLights) {ga="Light", synonyms="Back Porch Lights, Back Yard Lights"}


# Anything other than "settings" is considered a thing to generate
# Special properties:

# template: the filename of the template without .erb extension

# Automatic / generated variables:
# For convenience, several variables are created for each thing automatically
# They can be used within the template without having to add them explicitly,
# but they can be overridden in the yaml

# name
# This is the same as the yaml entry name, e.g. MasterBathroom_Light

# name_parts (array)
# An array from splitting the name by underscore
# e.g. name: MasterBathroom_Light -> name_parts[0]: MasterBathroom, name_parts[1]: Light

# label
# generated by splitting the CamelCase of the thing's name
# e.g. name: MasterBathroom_Light -> label: "Master Bathroom Light"

# thingid
# generated by converting the thing's name to lower case and replacing "_" with "-"
# e.g. name: MasterBathroom_Light -> thingid: masterbathroom-light

# room
# generated by taking the first part of the thing's name before the underscore
# and splitting the camel case into separate words]
# e.g. name: MasterBathroom_Light -> room: "Master Bathroom"

MainToilet_Button:
  template: aqara-button
  groups:
    - gLightButtons

MasterToilet_Switch:
  template: tasmota-switch
  thingid: mastertoilet-switch
  switches:
    - name: MasterToilet_Light
      label: Master Toilet Light
      groups:
        - gInsideLights
        - gPresenceSimulators
        - gMasterBathRoom
      tags:
        - Lightbulb
      metadata:
        - ga: Light
        - alexa: Lighting
        - probability: 0.05
        - max_duration: 5m
  buttons:
    - name: MasterToilet_Light_Button

MasterToilet_Window:
  template: aqara-contact
  thingid: mastertoilet-window-contact
  groups:
    - gWindows
    - gMasterBathRoom
  tags:
    - Window

MasterBathRoom_Window:
  template: aqara-contact
  thingid: masterbathroom-window-contact
  groups:
    - gWindows
    - gMasterBathRoom
  tags:
    - Window

MasterBathRoom_Switch1:
  template: tasmota-switch
  switches:
    - name: MasterBathRoom_Light
      label: Master Bath Room Light Switch
    - name: MasterBathRoom_ExhaustFan
      label: Master Bath Room Exhaust Fan
      groups:
        - gInsideLights
        - gExhaustFans
        - gMasterBathRoom
      tags:
        - Fan
      metadata:
        - ga: Fan
        - alexa="PowerController.powerState" [category="FAN"]
        - expire: 20m,command=OFF
  buttons:
    - name: MasterBathRoom_Light_Button
      label: Master Bath Room Switch Button
      groups:
        - gLightButtons

BathTub_Light_Switch:
  template: tasmota-switch
  thingid: masterbathroom-switch2
  switches:
    - name: BathTub_Light
      label: Shower Light
      groups:
        - gInsideLights
        - gMasterBathRoom
      tags:
        - Lightbulb
      metadata:
        - ga: Light
        - alexa: Lighting

MasterBathRoom_Light:
  template: tasmota-light

  groups:
    - gMasterBathRoom

  power:
    groups:
      - gPresenceSimulators
      - gInsideLights

  ct: # empty entry to include the "ct" feature

MasterBathRoom_PIR:
  template: aqara-pir
  groups:
    - gMasterBathRoom
  motion:
    groups:
      - gMotionSensors

MasterBathRoom_Thermometer:
  template: aqara-thermometer
  groups:
    - gMasterBathRoom

##
MasterBedRoom_Switch:
  template: tasmota-switch
  switches:
    - name: MasterBedRoom_Light_Switch
    - name: MasterBedRoom_Curtain_Switch
    - name: MasterBedRoom_Hallway_Switch
  buttons:
    - name: MasterBedRoom_Lights_Button
      groups:
        - gLightButtons
    - name: MasterBedRoom_Curtain_Button
    - name: Hallway_MBR_Button
      groups:
        - gLightButtons
      metadata:
        - gLightButtons="Hallway_Light_Power" [ dimmer="Hallway_Light_Dimmer" ]

MasterBedRoom_Light1:
  template: tasmota-light
  omit_assistant_metadata: true
  groups:
    - gMasterBedRoomLights
  color:
  ct:

MasterBedRoom_Light2:
  template: tasmota-light
  omit_assistant_metadata: true
  groups:
    - gMasterBedRoomLights
  color:
  ct:

MasterBedRoom_Light3:
  template: tasmota-light
  omit_assistant_metadata: true
  color:
  ct:
  groups:
    - gMasterBedRoomLights

MasterBedRoom_Light4:
  template: tasmota-light
  omit_assistant_metadata: true
  color:
  ct:
  groups:
    - gMasterBedRoomLights

MasterBedRoom_Lights:
  template: multi-channel-light
  color:
  ct:

  groups:
    - gMasterBedRoom

  power:
    groups:
      - gInsideLights
      - gPresenceSimulators

  channels:
    - masterbedroom-light1
    - masterbedroom-light2
    - masterbedroom-light3
    - masterbedroom-light4

##

BedRoom1_PIR:
  template: aqara-pir
  thingid: br1-pir
  groups:
    - gBedRoom1
    - gMotionSensors

MasterBedRoom_Dimmer:
  template: tradfri-simfonisk-dimmer
  groups:
    - RotaryKnobs
    - gMasterBedRoom
  tags:
    - Control
  metadata:
    - controls: MasterBedRoom_Lights_Dimmer

MasterBedRoom_CeilingFan:
  template: tasmota-switch
  switches:
    - name: MasterBedRoom_CeilingFan_High
      groups:
        - gMasterBedRoom_CeilingFan
    - name: MasterBedRoom_CeilingFan_Med
      groups:
        - gMasterBedRoom_CeilingFan
    - name: MasterBedRoom_CeilingFan_Low
      groups:
        - gMasterBedRoom_CeilingFan
  buttons:
    - name: MasterBedRoom_CeilingFan_Button_High
    - name: MasterBedRoom_CeilingFan_Button_Med
    - name: MasterBedRoom_CeilingFan_Button_Low

MasterBedRoom_Thermometer:
  template: aqara-thermometer
  groups:
    - gMasterBedRoom
  humidity_groups:
    - gMasterBedRoom
    - gIndoorHumidity

# MasterBedRoom_Curtain:
#   template: aqara-curtain-b1
#   # label: Master Bed Room Cloacking Device
#   metadata:
#     - ga="Curtain"

MasterBedRoom_Door:
  template: aqara-contact
  groups:
    - gMasterBedRoom
    - gExternalDoors
  tags:
    - Door

Wardrobe_PIR:
  template: aqara-pir
  groups:
    - gMasterBedRoom
  motion:
    groups:
      - gMotionSensors

Wardrobe_Light:
  template: tasmota-switch
  thingid: wardrobe-switch
  switches:
    - name: Wardrobe_Light
      label: Wardrobe Light
      groups:
        - gInsideLights
      metadata:
        - ga: Light
        - alexa: Lighting
